package io.sarl.api.protocol.examples.prescription.patient

import io.sarl.api.core.Initialize
import io.sarl.api.core.Logging
import io.sarl.api.protocol.ProtocolEnactment
import io.sarl.api.protocol.ProtocolEnactmentSkill
import io.sarl.api.protocol.ProtocolReady
import io.sarl.api.protocol.examples.prescription._generated.PrescriptionRole
import io.sarl.api.protocol.examples.prescription._generated.events.PkgBound
import io.sarl.api.protocol.examples.prescription._generated.patient.PatientProtocolCapacity
import io.sarl.api.protocol.examples.prescription._generated.^space.PrescriptionSpaceSpecification
import io.sarl.lang.core.EventSpace

agent PatientAgent {
	
	uses ProtocolEnactment, PatientProtocolCapacity, Logging
	
	var prescriptionSpace : EventSpace
	
	on Initialize {
		loggingName = "Patient"
		setSkill(new ProtocolEnactmentSkill)
		prescriptionSpace = enact(PrescriptionSpaceSpecification, PrescriptionRole.PATIENT)
	}

	on ProtocolReady {
		setSymptoms("fever")
	}
	
	on PkgBound {
		info("Thank you!")
		leave(prescriptionSpace, PrescriptionRole.PATIENT)
	}
	
}